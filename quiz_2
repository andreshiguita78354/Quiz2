create tablespace quiz2
datafile 'quiz2.dbf' size 50M;

CREATE TABLE SALARIES(
ID number(*,0) primary key,
EMPLOYEE_ID NUMBER(*,0) NOT NULL,
PROJECT_ID NUMBER(*,0),
SALARY NUMBER(10,2) NOT NULL CHECK(SALARY >500)
);

CREATE TABLE PROJECTS(
ID NUMBER(*,0) PRIMARY KEY,
CODE VARCHAR2(255) NOT NULL,
MANAGER_ID NUMBER(*,0),
BUDGET NUMBER(10,2) NOT NULL,
DATE_OF_BEGINNING DATE,
DATE_OF_ENDING DATE
);

CREATE TABLE EMPLOYEES(
ID NUMBER(*,0) PRIMARY KEY,
MANAGER_ID NUMBER(*,0),
DATE_OF_JOINING DATE NOT NULL,
FULL_NAME VARCHAR2(255) NOT NULL
);

ALTER TABLE SALARIES ADD CONSTRAINT FK_SALARY_EMPLOYEE REFERENCES EMPLOYEES(EMPLOYEE_ID);
ALTER TABLE SALARIES ADD CONSTRAINT FK_SALARY_PROJECT REFERENCES PROJECTS(PROJECT_ID);
ALTER TABLE PROJECTS ADD CONSTRAINT FK_MANAGER_PROJECT REFERENCES EMPLOYEES(MANAGER_ID);
ALTER TABLE EMPLOYEES ADD CONSTRAINT FK_MANAGER REFERENCES EMPLOYEES(MANAGER_ID);


--QUERIES
--1.
SELECT COUNT(*) FROM EMPLOYEES E INNER JOIN PROJECTS P
ON E.MANAGER_ID=P.MANAGER_ID
WHERE P.ID='44905736599';
